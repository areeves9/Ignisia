<template x-if="$store.auth.isAuthenticated()">
  <div 
      x-data="simulationForm()" 
      class="max-w-xl mx-auto p-6 bg-white shadow rounded mt-10 space-y-6"
      >
      <h1 class="text-2xl font-bold mb-4 text-center">Adiabatic Combustion Equilibrium</h1>

      <!-- Fuel -->
      <div>
        <label class="block font-medium mb-1">Fuel</label>
        <select x-model="form.fuel" class="w-full border-gray-300 rounded p-2">
          <option value="CH4">CH4 (Methane)</option>
          <option value="H2">H2 (Hydrogen)</option>
          <option value="C2H6">C2H6 (Ethane)</option>
          <!-- Add more if needed -->
        </select>
      </div>

      <!-- Oxidizer -->
      <div>
        <label class="block font-medium mb-1">Oxidizer</label>
        <select x-model="form.oxidizer" class="w-full border-gray-300 rounded p-2">
          <option value="O2:1.0, N2:3.76">Air (O₂ + N₂)</option>
          <option value="O2:1.0">Pure O₂</option>
        </select>
      </div>

      <!-- Temperature -->
      <div>
        <label class="block font-medium mb-1">Temperature: <span x-text="form.temperature + ' K'"></span></label>
        <input type="range" min="300" max="3000" step="10" x-model="form.temperature" class="w-full accent-blue-500" />
      </div>

      <!-- Pressure -->
      <div>
        <label class="block font-medium mb-1">Pressure: <span x-text="form.pressure + ' atm'"></span></label>
        <input type="range" min="0.1" max="10" step="0.1" x-model="form.pressure" class="w-full accent-green-500" />
      </div>

      <!-- Phi -->
      <div>
        <label class="block font-medium mb-1">Phi: <span x-text="form.phi"></span></label>
        <input type="range" min="0.1" max="5.0" step="0.1" x-model="form.phi" class="w-full accent-purple-500" />
      </div>

      <!-- Submit Button -->
      <button @click="submitSimulation" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 w-full">
        Run Simulation
      </button>

      <!-- Response Output -->
      <div x-show="response" class="mt-4 space-y-4">
        <div>
          <h2 class="text-lg font-semibold mb-2">Result</h2>
          <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto" x-text="JSON.stringify(response, null, 2)"></pre>
        </div>

        <template x-if="response && response.species_profile">
          <div>
              <h2 class="text-lg font-semibold mb-2">Species Profile Chart</h2>
              <canvas id="speciesChart" class="w-full bg-white rounded shadow"></canvas>
          </div>
        </template>
      </div>
    </div>
  </template>